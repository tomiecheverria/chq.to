<%= form_for @link do |f| %>

<% if flash[:errors] %>
<div id="error_explanation">
  <h2><%= pluralize(flash[:errors].count, "error") %> prohibited this link from being saved:</h2>

  <ul>
    <% flash[:errors].each do |message| %>
    <li><%= message %></li>
    <% end %>
  </ul>
</div>
<% end %>

<div class="field">
  <%= f.label :url %>
  <%= f.text_field :url %>
</div>

 <div class="field">
    <%= f.label :link_type %>
    <%= f.select :link_type, Link.link_types.keys.map { |type| [type.capitalize, Link.link_types[type]] } %>
  </div>

 <div class="field" id="expiration-date-field" style="<%= 'display: none;' unless @link.link_type == 'temporary' %>">
    <%= f.label :expiration_date %>
    <%= f.datetime_field :expiration_date %>
  </div>

<div class="actions">
  <%= f.submit @link.new_record? ? "Crear Link" : "Editar Link" %>
</div>
</div>
<% end %>


<script>
  console.log("El archivo link_form.js se está ejecutando correctamente.");
    document.addEventListener('DOMContentLoaded', function() {
      console.log("El archivo link_form.js se está ejecutando correctamente.");
      const linkTypeSelect = document.getElementById('link_type_select');
      const expirationDateField = document.getElementById('expiration_date_field');

      linkTypeSelect.addEventListener('change', function() {
        if (linkTypeSelect.value === '1') {
          expirationDateField.style.display = 'block';
        } else {
          expirationDateField.style.display = 'none';
        }
      });
    });
</script>

<%= link_to 'Back',   user_path(current_user)%>